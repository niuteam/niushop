(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-member-account_edit-account_edit"],{"222d":function(t,a,e){"use strict";e.r(a);var i=e("3f35"),n=e.n(i);for(var r in i)"default"!==r&&function(t){e.d(a,t,(function(){return i[t]}))}(r);a["default"]=n.a},"3f35":function(t,a,e){"use strict";var i=e("4ea4");e("26e9"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("50ee")),r=i(e("c409")),o={data:function(){return{formData:{realname:"",mobile:"",withdraw_type:"",bank_account:"",branch_bank_name:""},payList:[],index:0,flag:!1,transferType:[],accountInfo:null,back:""}},components:{},onLoad:function(t){t.id&&(this.formData.id=t.id),t.back&&(this.back=t.back)},mixins:[r.default],onShow:function(){this.$langConfig.refresh(),this.formData.id?this.getAccountDetail(this.formData.id):this.getTransferType(),this.formData.id?uni.setNavigationBarTitle({title:"编辑账户"}):uni.setNavigationBarTitle({title:"新增账户"})},methods:{getAccountDetail:function(t){var a=this;this.$api.sendRequest({url:"/api/memberbankaccount/info",data:{id:this.formData.id},success:function(t){0==t.code&&t.data&&(a.accountInfo=t.data,a.formData.realname=t.data.realname,a.formData.mobile=t.data.mobile,a.formData.bank_account=t.data.bank_account,a.formData.branch_bank_name=t.data.branch_bank_name,a.formData.withdraw_type=t.data.withdraw_type),a.getTransferType(),a.$refs.loadingCover&&a.$refs.loadingCover.hide()},fail:function(t){a.getTransferType(),a.$refs.loadingCover&&a.$refs.loadingCover.hide()}})},getTransferType:function(){var t=this;this.payList=[],this.$api.sendRequest({url:"/api/memberwithdraw/transferType",success:function(a){if(a.code>=0&&a.data){for(var e in t.transferType=a.data,t.transferType)t.formData.withdraw_type||"wechatpay"!=e||(t.formData.withdraw_type=e),t.payList.push(t.transferType[e]);t.payList.reverse(),!t.formData.id&&t.$refs.loadingCover&&t.$refs.loadingCover.hide(),t.accountInfo&&-1==t.$util.inArray(t.accountInfo.withdraw_type_name,t.payList)&&t.payList.push(t.accountInfo.withdraw_type_name),t.payList.length&&t.accountInfo&&(t.index=t.$util.inArray(t.accountInfo.withdraw_type_name,t.payList))}}})},bindPickerChange:function(t){this.index=t.detail.value;var a="";for(var e in this.transferType)this.transferType[e]==this.payList[this.index]&&(a=e);""!=a&&(this.formData.withdraw_type=a)},vertify:function(){var t=[{name:"realname",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"withdraw_type",checkType:"required",errorMsg:"请选择账户类型"}];"bank"==this.formData.withdraw_type&&t.push({name:"branch_bank_name",checkType:"required",errorMsg:"请输入银行名称"}),"wechatpay"!=this.formData.withdraw_type&&t.push({name:"bank_account",checkType:"required",errorMsg:"请输入提现账号"});var a=n.default.check(this.formData,t);return!!a||(this.$util.showToast({title:n.default.error}),this.flag=!1,!1)},saveAccount:function(){var t=this;if(!this.flag&&(this.flag=!0,this.vertify())){var a=this.formData.id?"edit":"add";this.$api.sendRequest({url:"/api/memberbankaccount/"+a,data:{id:this.formData.id,realname:this.formData.realname,mobile:this.formData.mobile,withdraw_type:this.formData.withdraw_type,bank_account:this.formData.bank_account,branch_bank_name:this.formData.branch_bank_name},success:function(a){0==a.code?(t.formData.id?t.$util.showToast({title:"修改成功"}):t.$util.showToast({title:"添加成功"}),""!=t.back?t.$util.redirectTo(t.back,{},t.redirect):t.$util.redirectTo("/otherpages/member/account/account")):(t.flag=!1,t.$util.showToast({title:a.message}))},fail:function(a){t.flag=!1}})}}}};a.default=o},6020:function(t,a,e){var i=e("de75");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("6587440a",i,!0,{sourceMap:!1,shadowMode:!1})},c470:function(t,a,e){"use strict";e.r(a);var i=e("e6b8"),n=e("222d");for(var r in n)"default"!==r&&function(t){e.d(a,t,(function(){return n[t]}))}(r);e("e9ef");var o,s=e("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"2559ca17",null,!1,i["a"],o);a["default"]=c.exports},de75:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.account-list-content[data-v-2559ca17]{margin:%?20?% %?30?%;padding:0 %?30?%;background-color:#fff;-webkit-border-radius:%?10?%;border-radius:%?10?%}.account-list-content .edit-item[data-v-2559ca17]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?30?%;padding:%?30?% 0;background-color:#fff}.account-list-content .edit-item .tit[data-v-2559ca17]{width:%?120?%}.account-list-content .edit-item .desc[data-v-2559ca17]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?20?%;padding:0}.account-list-content .edit-item[data-v-2559ca17]:first-of-type{margin-top:%?20?%}.account-list-content .edit-item .picker[data-v-2559ca17]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.account-list-content .edit-item .picker uni-text[data-v-2559ca17]:last-child{line-height:%?50?%;float:right;color:#909399;font-size:%?20?%}.account-list-content > .edit-item + .edit-item[data-v-2559ca17]{border-top:%?2?% solid #eee}.add[data-v-2559ca17]{margin-top:%?60?%;height:%?80?%;line-height:%?80?%!important;-webkit-border-radius:%?80?%;border-radius:%?80?%;font-weight:500;width:calc(100% - %?60?%);margin-left:%?30?%}.btn[data-v-2559ca17]{position:fixed;left:0;width:100%;bottom:%?30?%;height:auto;padding-bottom:constant(safe-area-inset-bottom);\r\n  /*兼容 IOS<11.2*/padding-bottom:env(safe-area-inset-bottom)\r\n  /*兼容 IOS>11.2*/}',""]),t.exports=a},e6b8:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return r})),e.d(a,"a",(function(){return i}));var i={loadingCover:e("790a").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"account-list-content",attrs:{"data-theme":t.themeStyle}},[e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.$lang("name")))]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"text",maxlength:"30",placeholder:"请输入真实姓名",name:"name"},model:{value:t.formData.realname,callback:function(a){t.$set(t.formData,"realname",a)},expression:"formData.realname"}})],1),e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.$lang("mobilePhone")))]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"number",maxlength:"11",placeholder:"请输入手机号"},model:{value:t.formData.mobile,callback:function(a){t.$set(t.formData,"mobile",a)},expression:"formData.mobile"}})],1),e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.$lang("accountType")))]),e("v-uni-picker",{staticClass:"picker",attrs:{value:t.index,range:t.payList},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.bindPickerChange.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"desc uni-input"},[t._v(t._s(t.payList[t.index]))]),e("v-uni-text",{staticClass:"iconfont iconright"})],1)],1),"bank"==t.formData.withdraw_type?e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v("银行名称")]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"text",maxlength:"50",placeholder:"请输入银行名称"},model:{value:t.formData.branch_bank_name,callback:function(a){t.$set(t.formData,"branch_bank_name","string"===typeof a?a.trim():a)},expression:"formData.branch_bank_name"}})],1):t._e(),"wechatpay"!=t.formData.withdraw_type?e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v("提现账号")]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"text",maxlength:"30",placeholder:"请输入提现账号"},model:{value:t.formData.bank_account,callback:function(a){t.$set(t.formData,"bank_account","string"===typeof a?a.trim():a)},expression:"formData.bank_account"}})],1):t._e(),e("v-uni-view",{staticClass:"btn"},[e("v-uni-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.saveAccount.apply(void 0,arguments)}}},[t._v(t._s(t.$lang("save")))])],1),e("loading-cover",{ref:"loadingCover"})],1)},r=[]},e9ef:function(t,a,e){"use strict";var i=e("6020"),n=e.n(i);n.a}}]);